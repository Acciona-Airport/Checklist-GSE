<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Encuesta Estado Equipos</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fff5f5;
      color: #000;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px 15px;
      margin: 0;
    }
    .container {
      background-color: #ffffff;
      padding: 25px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(200, 0, 0, 0.1);
      max-width: 800px;
      width: 100%;
      border: 1px solid #f0c0c0;
    }
    h1 {
      font-size: 20px;
      color: #c80000;
      text-align: center;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      margin-bottom: 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f8dada;
    }
    button {
      padding: 10px 20px;
      background-color: #c80000;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
      font-size: 15px;
    }
    button:hover {
      background-color: #a00000;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Encuesta Estado de Equipos</h1>

    <label for="rut">Ingrese su RUT</label>
    <input type="text" id="rut" placeholder="Ej: 12345678K" />

    <label for="equipo">Ingrese Número de Equipo</label>
    <input type="text" id="equipo" placeholder="Ej: 00123" />

    <label for="region">Región</label>
    <select id="region">
      <option value="SCL">SCL</option>
      <option value="MHC">MHC</option>
      <option value="ZOS">ZOS</option>
      <option value="ZAL">ZAL</option>
      <option value="PNT">PNT</option>
    </select>

    <label for="familia">Familia de Equipo</label>
    <select id="familia">
      <option>TRACTOR EQUIPAJE</option>
      <option>PAYMOVER</option>
      <option>TOWBARLESS</option>
      <option>CARGOLOADER</option>
      <option>CONVEYOR</option>
      <option>CAMION/CARRO SERVICIO</option>
      <option>GPU</option>
      <option>ASU/ACU</option>
      <option>CAMIONETAS DE APOYO</option>
      <option>ESCALA MOTORIZADA</option>
    </select>

    <table>
      <thead>
        <tr>
          <th>Condición</th>
          <th>SI</th>
          <th>NO</th>
        </tr>
      </thead>
      <tbody id="condiciones">
        <!-- Se genera por JavaScript -->
      </tbody>
    </table>

    <label for="observaciones">Observaciones Adicionales</label>
    <textarea id="observaciones" rows="4" placeholder="Escriba aquí..."></textarea>

    <button onclick="generarTabla()">Enviar y Generar Tabla</button>

    <pre id="output" style="margin-top: 20px; white-space: pre-wrap;"></pre>
  </div>

  <script>
    const condiciones = [
      "PAV OPERATIVO",
      "EXTINTOR OPERATIVO",
      "ASIENTOS EN BUEN ESTADO",
      "CINTURON DE SEGURIDAD OPERATIVO",
      "NEUMATICOS OPERATIVOS",
      "DIRECCION OPERATIVA",
      "ESPEJOS OPERATIVOS",
      "CUENTA CON STICKER DE DESCONEXION GPU (TRACTORISTAS EQUIPAJE)",
      "MUELA DE ENGANCHE OPERATIVA",
      "PANEL ENCENDIDO SIN ALERTAS O CODIGOS",
      "LUCES Y BALIZAS OPERATIVAS",
      "EQUIPO SIN FILTRACIONES DE AGUA O ACEITE",
      "LIMPIA PARABRIZAS OPERATIVO",
      "FRENOS OPERATIVOS",
      "TEMPERATURA NORMAL"
    ];

    const tbody = document.getElementById("condiciones");
    condiciones.forEach((cond, idx) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${cond}</td>
        <td><input type="radio" name="cond${idx}" value="SI" required></td>
        <td><input type="radio" name="cond${idx}" value="NO"></td>
      `;
      tbody.appendChild(tr);
    });

    function generarTabla() {
      const data = {
        rut: document.getElementById("rut").value,
        equipo: document.getElementById("equipo").value,
        region: document.getElementById("region").value,
        familia: document.getElementById("familia").value,
        condiciones: [],
        observaciones: document.getElementById("observaciones").value
      };

      condiciones.forEach((_, idx) => {
        const radios = document.getElementsByName("cond" + idx);
        for (const radio of radios) {
          if (radio.checked) {
            data.condiciones.push(radio.value);
            break;
          }
        }
      });

      const csv = [
        ["RUT", "EQUIPO", "REGION", "FAMILIA", ...condiciones, "OBSERVACIONES"].join(","),
        [
          data.rut,
          data.equipo,
          data.region,
          data.familia,
          ...data.condiciones,
          '"' + data.observaciones.replaceAll('"', '""') + '"'
        ].join(",")
      ].join("\n");

      document.getElementById("output").textContent = csv;
    }
  </script>
</body>
</html>
